<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zerocode Beauty — салон красоты</title>
  <meta name="description" content="Современный салон красоты: стрижки, окрашивание, уход за волосами, маникюр и брови. Онлайн‑запись и консультации." />
  <style>
    :root {
      --bg: #0f1320;
      --card: #161b2e;
      --text: #eaeefb;
      --muted: #a8b0d3;
      --brand: #7c6cff;
      --brand-2: #48d0b0;
      --danger: #ff6b6b;
      --shadow: 0 10px 30px rgb(0 0 0 / 30%);
      --radius: 14px;
      --radius-sm: 10px;
      --radius-lg: 22px;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; height: 100%; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, Inter, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 800px at 80% -10%, #2a3158 0%, transparent 60%),
                  radial-gradient(900px 600px at -10% 10%, #21355b 0%, transparent 60%),
                  var(--bg);
      color: var(--text);
      line-height: 1.6;
    }
    a { color: inherit; text-decoration: none; }
    .container { width: min(1100px, 92%); margin: 0 auto; }

    /* Header */
    header {
      position: sticky; top: 0; z-index: 50;
      background: rgb(15 19 32 / 85%);
      backdrop-filter: saturate(140%) blur(10px);
      border-bottom: 1px solid rgb(124 108 255 / 14%);
    }
    .nav { display: flex; align-items: center; justify-content: space-between; padding: 14px 0; }
    .brand { display: flex; align-items: center; gap: 12px; font-weight: 700; letter-spacing: 0.4px; }
    .logo {
      width: 38px; height: 38px; border-radius: 12px;
      background: conic-gradient(from 220deg, var(--brand), var(--brand-2));
      box-shadow: 0 6px 20px rgb(124 108 255 / 35%);
    }
    .nav-links { display: flex; gap: 20px; }
    .nav-links a { color: var(--muted); font-weight: 600; opacity: .9; }
    .nav-links a:hover { color: var(--text); }
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      padding: 12px 18px; border-radius: 12px; font-weight: 700; cursor: pointer;
      border: 1px solid rgb(124 108 255 / 30%);
      background: linear-gradient(180deg, #8a7bff, #6e5fff);
      color: white; box-shadow: var(--shadow);
      transition: transform .12s ease, filter .2s ease;
    }
    .btn:hover { transform: translateY(-1px); filter: brightness(1.05); }
    .btn.ghost { background: rgb(124 108 255 / 10%); color: var(--text); border-color: rgb(124 108 255 / 30%); box-shadow: none; }

    /* Hero */
    .hero { padding: 72px 0 40px; position: relative; overflow: hidden; }
    .hero-inner { display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 28px; align-items: center; }
    .kicker { display:inline-block; padding:6px 10px; border-radius: 999px; font-size: 12px; font-weight: 800; letter-spacing: .6px; text-transform: uppercase; background: rgb(124 108 255 / 16%); color: #cfd4ff; border: 1px solid rgb(124 108 255 / 22%); }
    h1 { font-size: clamp(28px, 4vw, 48px); line-height: 1.1; margin: 10px 0 8px; }
    .lead { color: var(--muted); font-size: clamp(14px, 2.4vw, 18px); }
    .cta { display: flex; gap: 12px; margin-top: 18px; }

    .hero-card {
      border: 1px solid rgb(124 108 255 / 22%);
      background: linear-gradient(180deg, rgb(22 27 46 / 90%), rgb(22 27 46 / 60%));
      border-radius: var(--radius-lg); padding: 22px; box-shadow: var(--shadow);
    }
    .badge-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
    .badge { padding: 10px 12px; border-radius: 12px; background: rgb(124 108 255 / 12%); border: 1px solid rgb(124 108 255 / 20%); text-align: center; color: #cfd4ff; font-weight: 700; }

    /* Sections */
    section { padding: 54px 0; }
    .section-title { font-size: 28px; margin: 0 0 8px; }
    .section-sub { color: var(--muted); margin-bottom: 22px; }

    /* Services */
    .cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
    .card {
      border: 1px solid rgb(124 108 255 / 20%);
      background: linear-gradient(180deg, rgb(22 27 46 / 90%), rgb(22 27 46 / 60%));
      border-radius: var(--radius); padding: 18px; box-shadow: var(--shadow);
    }
    .card h3 { margin: 0 0 6px; font-size: 18px; }
    .card p { margin: 0; color: var(--muted); }
    .price { margin-top: 10px; font-weight: 800; color: #d7dcff; }

    /* Gallery */
    .gallery { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; }
    .ph { border-radius: 12px; aspect-ratio: 1/1; background: linear-gradient(135deg, rgb(124 108 255 / 18%), rgb(72 208 176 / 16%)); border: 1px solid rgb(124 108 255 / 20%); }
    .ph.tall { grid-row: span 2; aspect-ratio: 2/3; }
    .ph.wide { grid-column: span 2; }

    /* Info */
    .info { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 20px; align-items: start; }
    .list { margin: 0; padding-left: 18px; color: var(--muted); }
    .panel { border: 1px solid rgb(124 108 255 / 20%); background: rgb(22 27 46 / 70%); border-radius: var(--radius); padding: 16px; }

    /* Footer */
    footer { padding: 22px 0 40px; color: var(--muted); text-align: center; }

    /* Floating chat button (placeholder for future widget) */
    .chat-fab { position: fixed; right: 20px; bottom: 20px; z-index: 60; }
    .chat-fab .btn { padding: 14px 18px; border-radius: 999px; }

    /* Chat widget */
    .chat-widget {
      position: fixed; right: 20px; bottom: 84px; z-index: 60;
      width: 360px; max-width: calc(100% - 32px); height: 460px;
      display: none; flex-direction: column;
      border: 1px solid rgb(124 108 255 / 24%);
      background: linear-gradient(180deg, rgb(22 27 46 / 92%), rgb(22 27 46 / 85%));
      border-radius: 16px; box-shadow: var(--shadow);
      overflow: hidden;
    }
    .chat-widget.open { display: flex; }
    .chat-header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 14px; border-bottom: 1px solid rgb(124 108 255 / 18%);
      background: rgb(124 108 255 / 10%);
    }
    .chat-header .title { font-weight: 800; }
    .chat-header .actions { display:flex; gap: 8px; }
    .chat-messages { flex: 1; padding: 12px; overflow-y: auto; display: grid; gap: 8px; }
    .msg { max-width: 88%; padding: 10px 12px; border-radius: 14px; font-size: 14px; white-space: pre-wrap; word-wrap: break-word; }
    .msg.user { margin-left: auto; background: #6e5fff; color: white; border-top-right-radius: 6px; }
    .msg.assistant { margin-right: auto; background: rgb(124 108 255 / 14%); color: var(--text); border-top-left-radius: 6px; border: 1px solid rgb(124 108 255 / 18%); }
    .msg.system { margin: 0 auto; background: transparent; color: var(--muted); font-size: 12px; }
    .msg.typing { opacity: 0.7; font-style: italic; }
    .chat-input { display: flex; gap: 8px; padding: 10px; border-top: 1px solid rgb(124 108 255 / 18%); }
    .chat-input textarea {
      flex: 1; resize: none; height: 44px; max-height: 120px;
      padding: 10px 12px; border-radius: 10px; border: 1px solid rgb(124 108 255 / 20%);
      background: #0f1426; color: var(--text);
    }
    .chat-input .send-btn { min-width: 92px; }

    /* Modal */
    .modal { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgb(0 0 0 / 45%); z-index: 70; }
    .modal.open { display: flex; }
    .modal-card { width: min(460px, 92%); border-radius: 16px; background: #12172a; border: 1px solid rgb(124 108 255 / 24%); box-shadow: var(--shadow); padding: 20px; }
    .modal-card h3 { margin-top: 0; }

    /* Responsive */
    @media (max-width: 900px) {
      .hero-inner { grid-template-columns: 1fr; gap: 20px; }
      .cards { grid-template-columns: 1fr 1fr; }
      .gallery { grid-template-columns: repeat(4, 1fr); }
      .info { grid-template-columns: 1fr; }
      .nav-links { display: none; }
    }
    @media (max-width: 560px) {
      .cards { grid-template-columns: 1fr; }
      .gallery { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container nav">
      <a href="#top" class="brand">
        <div class="logo" aria-hidden="true"></div>
        <span>Zerocode Beauty</span>
      </a>
      <nav class="nav-links">
        <a href="#services">Услуги</a>
        <a href="#prices">Цены</a>
        <a href="#gallery">Галерея</a>
        <a href="#contact">Контакты</a>
      </nav>
      <a href="#contact" class="btn">Записаться</a>
    </div>
  </header>

  <!-- Hero -->
  <main id="top" class="hero">
    <div class="container hero-inner">
      <div>
        <span class="kicker">Салон красоты</span>
        <h1>Современный уход и стиль, вдохновлённый вами</h1>
        <p class="lead">Стрижки, окрашивание, уход за волосами, маникюр и оформление бровей. Профессиональная команда и качественные материалы — для вашего идеального образа.</p>
        <div class="cta">
          <a href="#contact" class="btn">Онлайн‑запись</a>
          <a href="#services" class="btn ghost">Смотреть услуги</a>
        </div>
      </div>
      <div class="hero-card">
        <div class="badge-grid">
          <div class="badge">Топ‑стилисты</div>
          <div class="badge">Честные цены</div>
          <div class="badge">Гарантия качества</div>
          <div class="badge">Премиум уход</div>
          <div class="badge">Удобная запись</div>
          <div class="badge">Кофе/чай</div>
        </div>
      </div>
    </div>
  </main>

  <!-- Services -->
  <section id="services">
    <div class="container">
      <h2 class="section-title">Услуги</h2>
      <p class="section-sub">Основные направления салона</p>
      <div class="cards">
        <article class="card">
          <h3>Стрижка и укладка</h3>
          <p>Индивидуальный подбор формы и домашнего ухода.</p>
          <div class="price">от 2 500 ₽</div>
        </article>
        <article class="card">
          <h3>Окрашивание</h3>
          <p>Монотон, блонд, мелирование и сложные техники.</p>
          <div class="price">от 4 500 ₽</div>
        </article>
        <article class="card">
          <h3>Уход за волосами</h3>
          <p>Восстановление, блеск и защита от повреждений.</p>
          <div class="price">от 2 000 ₽</div>
        </article>
        <article class="card">
          <h3>Маникюр</h3>
          <p>Аппаратный маникюр, покрытие гель‑лаком, дизайн.</p>
          <div class="price">от 1 800 ₽</div>
        </article>
        <article class="card">
          <h3>Брови</h3>
          <p>Коррекция формы, окрашивание, долговременная укладка.</p>
          <div class="price">от 1 500 ₽</div>
        </article>
        <article class="card">
          <h3>Макияж</h3>
          <p>Дневной, вечерний, для мероприятий и фотосессий.</p>
          <div class="price">от 3 000 ₽</div>
        </article>
      </div>
    </div>
  </section>

  <!-- Prices -->
  <section id="prices">
    <div class="container">
      <h2 class="section-title">Цены</h2>
      <p class="section-sub">Окончательная стоимость зависит от уровня мастера и длины волос</p>
      <div class="cards">
        <article class="card">
          <h3>Комплекс «Уход + Стрижка»</h3>
          <p>Консультация, уход по типу волос, стрижка и укладка.</p>
          <div class="price">от 4 700 ₽</div>
        </article>
        <article class="card">
          <h3>Окрашивание «Обновление оттенка»</h3>
          <p>Тонирование или освежение цвета по длине.</p>
          <div class="price">от 5 500 ₽</div>
        </article>
        <article class="card">
          <h3>Брови «Идеальная форма»</h3>
          <p>Архитектура бровей + стойкое окрашивание.</p>
          <div class="price">от 2 300 ₽</div>
        </article>
      </div>
    </div>
  </section>

  <!-- Gallery -->
  <section id="gallery">
    <div class="container">
      <h2 class="section-title">Галерея</h2>
      <p class="section-sub">Образы наших клиентов</p>
      <div class="gallery">
        <div class="ph tall"></div>
        <div class="ph"></div>
        <div class="ph wide"></div>
        <div class="ph"></div>
        <div class="ph tall"></div>
        <div class="ph"></div>
        <div class="ph"></div>
        <div class="ph wide"></div>
        <div class="ph"></div>
        <div class="ph"></div>
        <div class="ph"></div>
        <div class="ph"></div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact">
    <div class="container info">
      <div>
        <h2 class="section-title">Контакты и запись</h2>
        <p class="section-sub">Мы на связи ежедневно с 10:00 до 21:00</p>
        <div class="panel">
          <p><strong>Адрес:</strong> г. Москва, ул. Прекрасная, 10</p>
          <p><strong>Телефон:</strong> <a href="tel:+79990001122">+7 999 000‑11‑22</a></p>
          <p><strong>Instagram:</strong> <a href="#" rel="noopener">@zerocode.beauty</a></p>
        </div>
        <p style="margin-top:12px;color:var(--muted)">Нажмите «Онлайн‑запись», чтобы отправить заявку. Мы подтвердим время и мастера.</p>
      </div>
      <form class="panel" onsubmit="event.preventDefault(); openModal('Спасибо! Мы свяжемся с вами для подтверждения записи.');">
        <h3 style="margin-top:0">Онлайн‑заявка</h3>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
          <input required placeholder="Имя" style="padding:12px;border-radius:10px;border:1px solid rgb(124 108 255 / 20%);background:#0f1426;color:var(--text)" />
          <input required placeholder="Телефон" style="padding:12px;border-radius:10px;border:1px solid rgb(124 108 255 / 20%);background:#0f1426;color:var(--text)" />
        </div>
        <div style="margin-top:10px; display:grid; grid-template-columns:1fr 1fr; gap:10px;">
          <input placeholder="Услуга" style="padding:12px;border-radius:10px;border:1px solid rgb(124 108 255 / 20%);background:#0f1426;color:var(--text)" />
          <input placeholder="Дата и время" style="padding:12px;border-radius:10px;border:1px solid rgb(124 108 255 / 20%);background:#0f1426;color:var(--text)" />
        </div>
        <textarea placeholder="Комментарий" rows="3" style="margin-top:10px;width:100%;padding:12px;border-radius:10px;border:1px solid rgb(124 108 255 / 20%);background:#0f1426;color:var(--text)"></textarea>
        <div style="display:flex;gap:10px;margin-top:12px;align-items:center;">
          <button class="btn" type="submit">Отправить</button>
          <span style="color:var(--muted);font-size:14px">Менеджер свяжется с вами в ближайшее время</span>
        </div>
      </form>
    </div>
  </section>

  <footer>
    <div class="container">© 2025 Zerocode Beauty — все права защищены</div>
  </footer>

  <!-- Floating chat button (placeholder) -->
  <div class="chat-fab">
    <button class="btn" onclick="toggleChat()">Чат</button>
  </div>

  <!-- Chat widget -->
  <div id="chat" class="chat-widget" aria-live="polite">
    <div class="chat-header">
      <div class="title">Онлайн‑чат</div>
      <div class="actions">
        <button class="btn ghost" style="padding:8px 10px" onclick="toggleChat()">Закрыть</button>
      </div>
    </div>
    <div id="chat-messages" class="chat-messages" aria-label="Сообщения чата"></div>
    <div class="chat-input">
      <textarea id="chat-input" placeholder="Напишите сообщение…" rows="2"></textarea>
      <button id="chat-send" class="btn send-btn" onclick="sendChat()">Отправить</button>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" aria-hidden="true" role="dialog">
    <div class="modal-card">
      <h3 id="modal-title">Сообщение</h3>
      <p id="modal-text" style="color:var(--muted)">…</p>
      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:10px;">
        <button class="btn ghost" onclick="closeModal()">Закрыть</button>
      </div>
    </div>
  </div>

  <script>
    // Basic, dependency-free chat widget that talks to the FastAPI backend.
    // To deploy via tunnel, set window.BACKEND_URL before this script or replace the default below.
    const BACKEND_URL = window.BACKEND_URL || 'http://jwvkt-178-130-41-168.a.free.pinggy.link';
    let sessionId = localStorage.getItem('zc_session_id') || null;
    let sending = false;

    function $(id) { return document.getElementById(id); }

    function toggleChat() {
      const el = $('chat');
      const open = !el.classList.contains('open');
      el.classList.toggle('open', open);
      if (open) {
        // First-time greeting if no messages yet
        const messagesEl = $('chat-messages');
        if (messagesEl && messagesEl.childElementCount === 0) {
          appendMessage('assistant', 'Здравствуйте. Я виртуальный консультант, чем могу помочь?');
        }
        // Ensure session on open
        ensureSession().catch((e) => {
          console.error('Chat session error:', e);
          openModal('Чат недоступен. Проверьте соединение с бэкендом.');
          el.classList.remove('open');
        });
      }
    }

    function appendMessage(role, text, opts = {}) {
      const msg = document.createElement('div');
      msg.className = `msg ${role}` + (opts.typing ? ' typing' : '');
      msg.textContent = text;
      $('chat-messages').appendChild(msg);
      $('chat-messages').scrollTop = $('chat-messages').scrollHeight;
      return msg;
    }

    async function ensureSession() {
      if (sessionId) return sessionId;
      const res = await fetch(`${BACKEND_URL}/chat/start`, { method: 'POST' });
      if (!res.ok) throw new Error(`start failed: ${res.status}`);
      const data = await res.json();
      sessionId = data.sessionId;
      localStorage.setItem('zc_session_id', sessionId);
      return sessionId;
    }

    async function sendChat() {
      if (sending) return;
      const input = $('chat-input');
      const text = (input.value || '').trim();
      if (!text) return;

      // local echo
      appendMessage('user', text);
      input.value = '';

      sending = true;
      const typingEl = appendMessage('assistant', 'Печатает…', { typing: true });
      $('chat-send').disabled = true;
      input.disabled = true;

      try {
        await ensureSession();
        const res = await fetch(`${BACKEND_URL}/chat/message`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ sessionId, text }),
        });
        if (!res.ok) {
          const errText = await res.text();
          throw new Error(`send failed: ${res.status} ${errText}`);
        }
        const data = await res.json();
        typingEl.remove();
        appendMessage('assistant', data.reply || '');
      } catch (e) {
        console.error(e);
        typingEl.remove();
        appendMessage('system', 'Ошибка: не удалось отправить сообщение. Попробуйте позже.');
      } finally {
        sending = false;
        $('chat-send').disabled = false;
        input.disabled = false;
        input.focus();
      }
    }

    // Send on Enter (and allow Shift+Enter for newline)
    $('chat-input').addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendChat();
      }
    });

    function openModal(msg) {
      document.getElementById('modal-text').textContent = msg || '';
      document.getElementById('modal').classList.add('open');
    }
    function closeModal() {
      document.getElementById('modal').classList.remove('open');
    }
    document.getElementById('modal').addEventListener('click', (e) => {
      if (e.target.id === 'modal') closeModal();
    });
  </script>
</body>
</html>
